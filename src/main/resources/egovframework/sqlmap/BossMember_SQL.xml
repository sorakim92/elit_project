<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >


<sqlMap namespace = "BossMember_space">
	<typeAlias  alias="egovMap" type="egovframework.rte.psl.dataaccess.util.EgovMap"/>
	<typeAlias  alias="bossmemberVO" type="egov.service1.BossMemberVO"/>
	
	<select id="bossmemberDAO.selectbossmemberService" resultClass = "egovMap">
		SELECT b.* FROM (
			SELECT rownum rn, a.* from (	
				SELECT  userid,
						userpw,
						username,
						email,
						userphone,					
						business,
						rdate						
				FROM	
						member
				WHERE	
						userid IS NOT NULL 
				AND		business = 'P'
				OR 		business = 'Y'
				ORDER BY rdate DESC) a )b
	</select>
	<select id="bossmemberDAO.selectbossmemberDetail" resultClass="BossMemberVO">
		SELECT 	userid, 
				userphone,
				email,
				storeaddr
				
		FROM bossmember
		WHERE userid = 'test1'
	
	</select>

	<select id = "bossmemberDAO.selectBossMemberInfo" resultClass = "BossMemberVO">
		SELECT userid,
				userpw,
				username,
				email,
				userphone,
				business
		FROM 	
				member
		WHERE 	
				userid = #userid# 
		AND 	
				business = 'Y'
	</select>

	<update id="bossmemberDAO.updatebossmember">
		UPDATE bossmember
			SET 
				userpw=#userpw#,		
				email=#email#,
				storeaddr=#storeaddr#
				
		WHERE userid = 'test1'
	</update>
	
	<update id ="bossmemberDAO.updateMemberBusiness">
		UPDATE
				member				
		SET
				business = 'Y'
		WHERE
				userid is not null and userid = #userid#
	
	</update>
	
	<insert id ="bossmemberDAO.insertBossMember">
		INSERT INTO bossmember(
								    userid,
								    userpw,
								    username,
								    email,
								    userphone,
								    storeaddr,
								    business,
								    rdate,
								    storeunq
								)
			VALUES(
									#userid#,
									#userpw#,
									#username#,
									#email#,
									#userphone#,
									#storeaddr#,
									#business#,
									sysdate,									
									store_seq.nextval
					)
	
	</insert>
				

</sqlMap>
