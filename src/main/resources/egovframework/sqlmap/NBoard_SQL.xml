<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >

<sqlMap namespace = "nboard_space">
	<typeAlias  alias="egovMap" type="egovframework.rte.psl.dataaccess.util.EgovMap"/>
	<typeAlias  alias="nboardVO" type="egov.service1.NBoardVO"/>


	<select id="nboardDAO.selectNboardList" resultClass="egovMap">
		SELECT b.* FROM (
			SELECT rownum rn, a.* from (
				SELECT 	unq, 
						title,
						hits,
						to_char(rdate,'yyyy/mm/dd')rdate,
						content,
						sort
				FROM 	nboard
				WHERE 	title IS NOT NULL and sort = 'N'
				<isNotNull property="s_text">
					<isNotEmpty property="s_text">
					and $s_field$ LIKE '%$s_text$%'
					</isNotEmpty>
				</isNotNull>
				ORDER BY udate DESC)a	)b 
	</select>
	
	<select id="nboardDAO.selectnboardDetail" resultClass="NBoardVO">
		SELECT 	unq, 
				title,
				hits,
				to_char(rdate,'yyyy/mm/dd')rdate,
				content
		FROM nboard 
		WHERE unq = #unq#
	
	</select>
	
	<select id="nboardDAO.selectFAQList" resultClass="egovMap">
		SELECT b.* FROM (
			SELECT rownum rn, a.* from (
				SELECT 	unq, 
						title,
						hits,
						to_char(rdate,'yyyy/mm/dd')rdate,
						content,
						sort
				FROM 	nboard
				WHERE 	title IS NOT NULL and sort = 'F'
				<isNotNull property="s_text">
					<isNotEmpty property="s_text">
					and $s_field$ LIKE '%$s_text$%'
					</isNotEmpty>
				</isNotNull>
				ORDER BY udate DESC)a	)b 
	
	
	
	</select>
	
	
	
	
	
	
	
	<insert id="nboardDAO.insertnboardWrite">
		INSERT INTO nboard(	unq,
							title,
							rdate,
							udate,
							content,
							sort) 
					VALUES(	nboard_seq.nextval,
							#title#,
							sysdate,
							sysdate,
							#content#,
							#sort#
							)

	</insert>


	<update id="nboardDAO.updatenboard">
		UPDATE nboard 
			SET 
				title=#title#,
				content=#content#,
				udate = sysdate
		WHERE unq = #unq#
	</update>
	
	<update id="nboardDAO.updatenboardHits">
		UPDATE nboard
			SET hits= hits+1
		WHERE unq = #unq#
	
	</update>
	
	<delete id="nboardDAO.deletenboard">
	
		DELETE FROM nboard WHERE unq = #unq#
	
	</delete>

</sqlMap>

