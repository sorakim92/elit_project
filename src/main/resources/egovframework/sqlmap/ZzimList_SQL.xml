<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >


<sqlMap namespace = "zzimlist_space">
	<typeAlias  alias="egovMap" type="egovframework.rte.psl.dataaccess.util.EgovMap"/>
	<typeAlias  alias="zzimlistVO" type="egov.service1.ZzimListVO"/>
	
	<insert id="zzimlistDAO.insertZzimList">
	<![CDATA[
	INSERT INTO ZzimList(zzimindex,
						 rdate,
						 userid,
						 storeunq,
						 
			   VALUES  ( zzimlist_seq.nextval,
			   			 sysdate,
						 #userid#,
						 #storeunq#,
						
		]]>			
	</insert>
	
	
	
	<select id = "zimlistDAO.LikeInsertChk" resultClass ="java.lang.Integer">
		select count(*) from zzimlist where userid = #userid# and storeunq = #storeunq#
	</select>
	
	<select id="zimlistDAO.selectLikeChk" resultClass = "java.lang.String" >
		select 
				likechk 
		from 
				zzimlist 
		where 
				userid = #userid# and storeunq = #storeunq#
	</select>
	
	
	<insert id="zimlistDAO.insertZzimlike">
	
		INSERT INTO zzimlist(
							zzimindex,
							rdate,
							userid,
							storeunq,
							likechk
									)VALUES (
							zzimlist_seq.nextval,
							sysdate,		
							#userid#,
							#storeunq#,		
							'L') 
			
	</insert>
	
	<update id="zimlistDAO.addzzimlike">
	
		UPDATE  
				zzimlist 
		SET 
				likechk = 'L'
		WHERE
				userid= #userid# and storeunq = #storeunq#
	</update>
	
	<update id="zimlistDAO.cancelzzimlike">
			UPDATE  
				zzimlist 
		SET 
				likechk = 'U'
		WHERE
				userid= #userid# and storeunq = #storeunq#
	
	</update>
	
	
	
	
</sqlMap>